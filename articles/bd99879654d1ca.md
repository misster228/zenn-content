---
title: "コンテナイメージのレイヤーからファイルを回収する方法"
emoji: "🐳"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---

# コンテナイメージのレイヤーからファイルを回収する方法

コンテナイメージのビルド時にCOPYしてから削除したファイルをコンテナイメージから取り出したくなったことはないでしょうか？私はあります。[^1]

[^1]Gitで管理していない証明書をコンテナに配置し、コンテナ内のキーストア格納後に消去していたのですが、コンテナを作り直す際にその証明書の原本が見つからないという経験があります。

こんな時、ビルド済みのコンテナイメージからファイルを回収できる可能性があります。この記事ではコンテナのlayerからファイルを回収する手法について記載します。

## 結論
コンテナイメージビルド時にファイルをコピーする操作と削除する操作が別々のlayerとなっている場合、イメージをアーカイブ形式で出力してあげることでファイルを取り出すことが可能です。

## 